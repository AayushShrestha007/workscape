{"ast":null,"code":"import React,{useEffect,useState}from'react';import{FaUserCircle}from'react-icons/fa';import{useNavigate}from'react-router-dom';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import styled from'styled-components';import{updateEmployerProfile}from'../../../apis/Api';import EmployerNavbar from\"../../../components/EmployerNavbar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FormContainer=styled.div`\n  max-width: 500px;\n  margin: 20px auto;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n`;const Form=styled.form`\n  display: flex;\n  flex-direction: column;\n`;const Label=styled.label`\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n`;const Input=styled.input`\n  padding: 8px 10px;\n  margin-bottom: 20px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n`;const FileInput=styled.input`\n  display: none;\n`;const ImageWrapper=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n`;const ProfileImage=styled.img`\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 20px;\n`;const ProfileIcon=styled(FaUserCircle)`\n  font-size: 150px;\n  color: #ccc;\n`;const Button=styled.button`\n  padding: 10px;\n  background-color: #2d69b3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n\n  &:hover {\n    background-color: #0a6b00;\n  }\n`;const UpdateEmployerProfile=()=>{const[organizationName,setOrganizationName]=useState('');const[organizationAddress,setOrganizationAddress]=useState('');const[email,setEmail]=useState('');const[phone,setPhone]=useState('');const[password,setPassword]=useState('');const[employerImage,setEmployerImage]=useState(null);const[previewImage,setPreviewImage]=useState(null);const[organizationNameError,setOrganizationNameError]=useState('');const[organizationAddressError,setOrganizationAddressError]=useState('');const[emailError,setEmailError]=useState('');const[phoneError,setPhoneError]=useState('');const[passwordError,setPasswordError]=useState('');const[employerImageError,setEmployerImageError]=useState('');const navigate=useNavigate();useEffect(()=>{// Fetch employer data from localStorage\nconst employer=JSON.parse(localStorage.getItem('employer')).findemployer;if(employer){setOrganizationName(employer.organizationName||'');setOrganizationAddress(employer.organizationAddress||'');setEmail(employer.email||'');setPhone(employer.phone||'');setPreviewImage(`http://localhost:5500/employerImage/${employer.employerImage}`);}},[]);const handleImageChange=event=>{const file=event.target.files[0];if(file){setEmployerImage(file);setPreviewImage(URL.createObjectURL(file));}};const handleIconClick=()=>{document.getElementById('employerImage').click();};const validate=()=>{let isValid=true;if(organizationName.trim()===''){setOrganizationNameError('Organization name is required');isValid=false;}else{setOrganizationNameError('');}if(organizationAddress.trim()===''){setOrganizationAddressError('Organization address is required');isValid=false;}else{setOrganizationAddressError('');}if(!email||email.trim()===''||!email.includes('@')){setEmailError('Valid email is required');isValid=false;}else{setEmailError('');}if(phone.trim()===''){setPhoneError('Phone is required');isValid=false;}else{setPhoneError('');}if(password.trim()===''){setPasswordError('Password is required');isValid=false;}else{setPasswordError('');}if(employerImage===null&&!previewImage){setEmployerImageError('Profile image is required');isValid=false;}else{setEmployerImageError('');}return isValid;};const handleSubmit=async e=>{e.preventDefault();if(!validate()){return;}// Fetch employerId from localStorage\nconst employer=JSON.parse(localStorage.getItem('employer')).findemployer;const employerId=employer._id;const formData=new FormData();formData.append('organizationName',organizationName);formData.append('organizationAddress',organizationAddress);formData.append('email',email);formData.append('phone',phone);formData.append('password',password);if(employerImage){formData.append('employerImage',employerImage);}try{const response=await updateEmployerProfile(employerId,formData);if(response.data.success){// Update localStorage with the updated employer data\nconst updatedEmployer={...employer,organizationName,organizationAddress,email,phone,employerImage:response.data.employer.employerImage};localStorage.setItem('employer',JSON.stringify({findemployer:updatedEmployer}));toast.success('Profile updated successfully');setTimeout(()=>{navigate('/employer/dashboard');},1000);}else{toast.error(response.data.message);}}catch(error){console.error('Error updating profile:',error);toast.error('Error updating profile');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EmployerNavbar,{}),/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(ImageWrapper,{onClick:handleIconClick,children:[previewImage?/*#__PURE__*/_jsx(ProfileImage,{src:previewImage,alt:\"Profile Preview\"}):/*#__PURE__*/_jsx(ProfileIcon,{}),/*#__PURE__*/_jsx(FileInput,{type:\"file\",id:\"employerImage\",accept:\"image/*\",onChange:handleImageChange}),employerImageError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:employerImageError})]}),/*#__PURE__*/_jsx(Label,{htmlFor:\"organizationName\",children:\"Organization Name\"}),/*#__PURE__*/_jsx(Input,{id:\"organizationName\",type:\"text\",value:organizationName,onChange:e=>setOrganizationName(e.target.value),placeholder:\"Enter your organization name\"}),organizationNameError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:organizationNameError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"organizationAddress\",children:\"Organization Address\"}),/*#__PURE__*/_jsx(Input,{id:\"organizationAddress\",type:\"text\",value:organizationAddress,onChange:e=>setOrganizationAddress(e.target.value),placeholder:\"Enter your organization address\"}),organizationAddressError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:organizationAddressError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{id:\"email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Enter your email\"}),emailError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:emailError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(Input,{id:\"phone\",type:\"text\",value:phone,onChange:e=>setPhone(e.target.value),placeholder:\"Enter your phone number\"}),phoneError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:phoneError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{id:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter a new password\"}),passwordError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:passwordError}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update Profile\"})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default UpdateEmployerProfile;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}