{"ast":null,"code":"import{Document,Image,Page,pdf,StyleSheet,Text,View}from'@react-pdf/renderer';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import styled from'styled-components';import{createResumeApi}from'../../../apis/Api';// Ensure this path matches your project structure\nimport ApplicantNavbar from\"../../../components/ApplicantNavbar\";// Styles for PDF\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const styles=StyleSheet.create({page:{flexDirection:'column',backgroundColor:'#fff',padding:30},section:{marginBottom:0,padding:10,flexGrow:1},header:{fontSize:24,marginBottom:10,textAlign:'center'},subheader:{fontSize:18,margin:5,fontWeight:'bold'},text:{margin:3,fontSize:14,lineHeight:1.5},personalInfoSection:{flexDirection:'row',justifyContent:'space-between',alignItems:'center'},userImage:{width:80,height:100,borderRadius:10,marginLeft:10},experienceSection:{marginTop:0},jobTitle:{fontSize:14,fontWeight:'bold',margin:3}});// PDF Document Component\nconst MyDocument=_ref=>{let{formData}=_ref;return/*#__PURE__*/_jsx(Document,{children:/*#__PURE__*/_jsxs(Page,{size:\"A4\",style:styles.page,children:[/*#__PURE__*/_jsx(Text,{style:styles.header,children:\"Resume\"}),/*#__PURE__*/_jsxs(View,{style:styles.section,children:[/*#__PURE__*/_jsx(Text,{style:styles.subheader,children:\"Personal Information\"}),/*#__PURE__*/_jsxs(View,{style:styles.personalInfoSection,children:[/*#__PURE__*/_jsxs(View,{children:[/*#__PURE__*/_jsxs(Text,{style:styles.text,children:[\"Name: \",formData.name]}),/*#__PURE__*/_jsxs(Text,{style:styles.text,children:[\"Email: \",formData.email]}),/*#__PURE__*/_jsxs(Text,{style:styles.text,children:[\"Phone: \",formData.phone]})]}),/*#__PURE__*/_jsx(Image,{style:styles.userImage,src:`http://localhost:5500/userImage/${formData.userImage}`})]})]}),/*#__PURE__*/_jsxs(View,{style:styles.section,children:[/*#__PURE__*/_jsx(Text,{style:styles.subheader,children:\"Experience\"}),/*#__PURE__*/_jsxs(Text,{style:styles.jobTitle,children:[formData.previousCompanyName,\" - \",formData.jobTitle,\" (\",formData.jobDuration,\")\"]}),/*#__PURE__*/_jsx(Text,{style:styles.text,children:formData.jobDescription})]}),/*#__PURE__*/_jsxs(View,{style:styles.section,children:[/*#__PURE__*/_jsx(Text,{style:styles.subheader,children:\"Education\"}),/*#__PURE__*/_jsxs(Text,{style:styles.text,children:[formData.highestQualification,\" from \",formData.educationInstitute]})]})]})});};// Styled components\nconst PageContainer=styled.div`\n  padding: 20px;\n  background-color: white;\n  min-height: calc(100vh - 60px);  // Assuming the navbar is 60px high\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-y: auto;  // Enable vertical scrolling\n`;const Input=styled.input`\n  margin-bottom: 10px;\n  width: 300px;\n  padding: 8px;\n`;const Title=styled.h1`\n  margin-top: 20px;\n  margin-bottom: 30px;\n  font-size: 32px;\n  color: #333;\n  text-align: center;\n`;const Button=styled.button`\n  padding: 10px 20px;\n  background-color: #2d69b3;\n  color: white;\n  border: none;\n  border-radius: 40px;\n`;const Textarea=styled.textarea`\n  margin-bottom: 10px;\n  width: 300px;\n  padding: 8px;\n  height: 100px; // You can adjust the height as needed\n`;const Container=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;const PdfViewer=styled.iframe`\n  width: 100%;\n  height: 500px;  // Increase the height to make the PDF larger\n  border: none;\n  margin-top: 20px;\n  padding: 0 20px; // Add left and right padding\n`;const CreateResume=()=>{const[formData,setFormData]=useState({resumeTitle:'',name:'',email:'',phone:'',previousCompanyName:'',jobTitle:'',jobDuration:'',jobDescription:'',highestQualification:'',educationInstitute:'',userImage:''// Add user image\n});const[pdfUrl,setPdfUrl]=useState('');const navigate=useNavigate();useEffect(()=>{// Fetch user data from local storage\nconst user=JSON.parse(localStorage.getItem('user')).findUser;if(user){setFormData(prev=>({...prev,name:user.name,email:user.email,phone:user.phone,userImage:user.userImage// Set user image from local storage\n}));}},[]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleFormSubmit=async()=>{const doc=/*#__PURE__*/_jsx(MyDocument,{formData:formData});const asPdf=pdf();// Create an instance of PDF\nasPdf.updateContainer(doc);const blob=await asPdf.toBlob();// Generate blob\nconst url=URL.createObjectURL(blob);setPdfUrl(url);// FormData to send via HTTP\nconst fileData=new FormData();fileData.append(\"file\",blob,\"resume.pdf\");// Append other form data fields to the FormData object\nfileData.append(\"resumeTitle\",formData.resumeTitle);fileData.append(\"previousCompanyName\",formData.previousCompanyName);fileData.append(\"jobTitle\",formData.jobTitle);fileData.append(\"jobDuration\",formData.jobDuration);fileData.append(\"jobDescription\",formData.jobDescription);fileData.append(\"highestEducation\",formData.highestQualification);fileData.append(\"educationInstitute\",formData.educationInstitute);try{await createResumeApi(fileData);toast.success('Resume Created Successfully!');}catch(error){console.error('Error submitting resume:',error);toast.error('Error submitting resume');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ApplicantNavbar,{}),/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Build Your Resume\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"resumeTitle\",value:formData.resumeTitle,onChange:handleInputChange,placeholder:\"Resume Title\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"previousCompanyName\",value:formData.previousCompanyName,onChange:handleInputChange,placeholder:\"Previous Company Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"jobTitle\",value:formData.jobTitle,onChange:handleInputChange,placeholder:\"Job Title\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"jobDuration\",value:formData.jobDuration,onChange:handleInputChange,placeholder:\"Job Duration\"}),/*#__PURE__*/_jsx(Textarea,{name:\"jobDescription\",value:formData.jobDescription,onChange:handleInputChange,placeholder:\"Job Description\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"highestQualification\",value:formData.highestQualification,onChange:handleInputChange,placeholder:\"Highest Education Qualification\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"educationInstitute\",value:formData.educationInstitute,onChange:handleInputChange,placeholder:\"Education Institute\"}),/*#__PURE__*/_jsx(Button,{onClick:handleFormSubmit,children:\"Create Resume\"}),pdfUrl&&/*#__PURE__*/_jsx(PdfViewer,{src:pdfUrl})]})})]});};export default CreateResume;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}