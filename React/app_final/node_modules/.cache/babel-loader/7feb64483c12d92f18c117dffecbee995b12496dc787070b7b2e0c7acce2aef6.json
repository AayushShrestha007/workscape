{"ast":null,"code":"import React,{useEffect,useState}from'react';import{FaUserCircle}from'react-icons/fa';import{useNavigate}from'react-router-dom';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import styled from'styled-components';import{updateApplicantProfile}from'../../../apis/Api';import ApplicantNavbar from\"../../../components/ApplicantNavbar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FormContainer=styled.div`\n  max-width: 500px;\n  margin: 20px auto;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n`;const Form=styled.form`\n  display: flex;\n  flex-direction: column;\n`;const Label=styled.label`\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n`;const Input=styled.input`\n  padding: 8px 10px;\n  margin-bottom: 20px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n`;const FileInput=styled.input`\n  display: none;\n`;const ImageWrapper=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n`;const ProfileImage=styled.img`\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 20px;\n`;const ProfileIcon=styled(FaUserCircle)`\n  font-size: 150px;\n  color: #ccc;\n`;const Button=styled.button`\n  padding: 10px;\n  background-color: #2d69b3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n\n  &:hover {\n    background-color: #0a6b00;\n  }\n`;const UpdateApplicantProfile=()=>{const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[profileImage,setProfileImage]=useState(null);const[previewImage,setPreviewImage]=useState(null);const[nameError,setNameError]=useState('');const[emailError,setEmailError]=useState('');const[passwordError,setPasswordError]=useState('');const[profileImageError,setProfileImageError]=useState('');const navigate=useNavigate();useEffect(()=>{// Fetch user data from localStorage\nconst user=JSON.parse(localStorage.getItem('user')).findUser;if(user){setName(user.name||'');setEmail(user.email||'');setPreviewImage(`http://localhost:5500/userImage/${user.userImage}`);}},[]);const handleImageChange=event=>{const file=event.target.files[0];if(file){setProfileImage(file);setPreviewImage(URL.createObjectURL(file));}};const handleIconClick=()=>{document.getElementById('profileImage').click();};const validate=()=>{let isValid=true;if(name.trim()===''){setNameError('Name is required');isValid=false;}else{setNameError('');}if(!email||email.trim()===''||!email.includes('@')){setEmailError('Valid email is required');isValid=false;}else{setEmailError('');}if(password.trim()===''){setPasswordError('Password is required');isValid=false;}else{setPasswordError('');}if(profileImage===null&&!previewImage){setProfileImageError('Profile image is required');isValid=false;}else{setProfileImageError('');}return isValid;};const handleSubmit=async e=>{e.preventDefault();if(!validate()){return;}// Fetch userId from localStorage\nconst user=JSON.parse(localStorage.getItem('user')).findUser;const userId=user._id;const formData=new FormData();formData.append('name',name);formData.append('email',email);formData.append('password',password);if(profileImage){formData.append('userImage',profileImage);}try{const response=await updateApplicantProfile(userId,formData);if(response.data.success){// Update localStorage with the updated user data\nconst updatedUser={...user,name,email,userImage:response.data.user.userImage};localStorage.setItem('user',JSON.stringify({findUser:updatedUser}));toast.success('Profile updated successfully');setTimeout(()=>{navigate('/applicant/dashboard');},1000);// Delay navigation to allow the toast to be shown\n}else{toast.error(response.data.message);}}catch(error){console.error('Error updating profile:',error);toast.error('Error updating profile');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ApplicantNavbar,{}),/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(ImageWrapper,{onClick:handleIconClick,children:[previewImage?/*#__PURE__*/_jsx(ProfileImage,{src:previewImage,alt:\"Profile Preview\"}):/*#__PURE__*/_jsx(ProfileIcon,{}),/*#__PURE__*/_jsx(FileInput,{type:\"file\",id:\"profileImage\",accept:\"image/*\",onChange:handleImageChange}),profileImageError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:profileImageError})]}),/*#__PURE__*/_jsx(Label,{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{id:\"name\",type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Enter your name\"}),nameError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:nameError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{id:\"email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Enter your email\"}),emailError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:emailError}),/*#__PURE__*/_jsx(Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{id:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter a new password\"}),passwordError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:passwordError}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update Profile\"})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default UpdateApplicantProfile;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}