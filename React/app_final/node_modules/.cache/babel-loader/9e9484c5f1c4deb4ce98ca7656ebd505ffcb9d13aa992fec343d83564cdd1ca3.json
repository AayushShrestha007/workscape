{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,useNavigate,useParams}from'react-router-dom';import{toast}from'react-toastify';import styled from'styled-components';import{applyToJobApi,getAllResumesApi,getJobDetailsByIdApi}from'../../../apis/Api';import ApplicantNavbar from'../../../components/ApplicantNavbar';import Loader from'../../../components/Loader';import ResumeSelectionDialog from'../../../components/ResumeSelectionDialog';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PageContainer=styled.div`\n  padding: 20px;\n  background-color: white;\n  min-height: calc(100vh - 60px);  // Assuming the navbar is 60px high\n`;const JobContainer=styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  background: #f0f2f5;\n  border-radius: 8px;\n  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n`;const JobHeader=styled.div`\n  display: flex;\n  align-items: center;\n`;const EmployerImage=styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n`;const JobDetails=styled.div`\n  margin-left: 20px;\n`;const JobTitle=styled.h2`\n  font-size: 24px;\n  color: #65A168;  // Green color for the job title\n  margin: 0;\n`;const EmployerName=styled.h3`\n  font-size: 20px;\n  color: #333;\n  margin: 0;\n`;const JobDescription=styled.p`\n  font-size: 16px;\n  color: #666;\n  margin-top: 20px;\n`;const JobDetailTitle=styled.span`\n  font-weight: bold;\n`;const JobDetail=styled.p`\n  font-size: 16px;\n  color: #333;\n  margin-top: 10px;\n`;const Button=styled.button`\n  background-color: #2d69b3;\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 40px;  // Rounded corners\n  cursor: pointer;\n  font-size: 16px;\n  margin-top: 20px;\n`;const ApplicantJobDetails=()=>{const{state}=useLocation();const{id}=useParams();const[job,setJob]=useState(null);const navigate=useNavigate();const[loading,setLoading]=useState(true);const[showDialog,setShowDialog]=useState(false);const[resumes,setResumes]=useState([]);const[selectedResumeId,setSelectedResumeId]=useState(null);useEffect(()=>{setLoading(true);getJobDetailsByIdApi(id).then(res=>{setJob(res.data.job);setLoading(false);}).catch(error=>{console.log(error);setLoading(false);});},[id]);useEffect(()=>{// Fetch the user's resumes\ngetAllResumesApi(1,10).then(res=>{setResumes(res.data.resumes);}).catch(error=>{console.log(error);});},[]);const handleApply=resumeId=>{applyToJobApi({jobId:id,resumeId}).then(res=>{if(res.data.success){toast.success('Application submitted successfully');navigate('/applicant/dashboard');// Redirect to dashboard or any other page\n}else{toast.error(res.data.message);}}).catch(error=>{toast.error('Error submitting application');console.log(error);});};const handleOpenDialog=()=>{setShowDialog(true);};const handleCloseDialog=()=>{setShowDialog(false);};const handleSelectResume=resumeId=>{setSelectedResumeId(resumeId);handleApply(resumeId);handleCloseDialog();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ApplicantNavbar,{}),/*#__PURE__*/_jsxs(PageContainer,{children:[loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(JobContainer,{children:[/*#__PURE__*/_jsxs(JobHeader,{children:[/*#__PURE__*/_jsx(EmployerImage,{src:`http://localhost:5500/employerImage/${job.employer.employerImage}`,alt:\"Employer\"}),/*#__PURE__*/_jsxs(JobDetails,{children:[/*#__PURE__*/_jsx(JobTitle,{children:job.title}),/*#__PURE__*/_jsx(EmployerName,{children:job.employer.organizationName})]})]}),/*#__PURE__*/_jsx(JobDescription,{children:job.description}),/*#__PURE__*/_jsxs(JobDetail,{children:[/*#__PURE__*/_jsx(JobDetailTitle,{children:\"Work Type:\"}),\" \",job.workType]}),/*#__PURE__*/_jsxs(JobDetail,{children:[/*#__PURE__*/_jsx(JobDetailTitle,{children:\"Skills:\"}),\" \",job.skills]}),/*#__PURE__*/_jsxs(JobDetail,{children:[/*#__PURE__*/_jsx(JobDetailTitle,{children:\"Qualification:\"}),\" \",job.qualification]}),!(state!==null&&state!==void 0&&state.alreadyApplied)&&/*#__PURE__*/_jsx(Button,{onClick:handleOpenDialog,children:\"Apply Now\"})]}),/*#__PURE__*/_jsx(ResumeSelectionDialog,{show:showDialog,resumes:resumes,onClose:handleCloseDialog,onSelectResume:handleSelectResume})]})]});};export default ApplicantJobDetails;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","useParams","toast","styled","applyToJobApi","getAllResumesApi","getJobDetailsByIdApi","ApplicantNavbar","Loader","ResumeSelectionDialog","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PageContainer","div","JobContainer","JobHeader","EmployerImage","img","JobDetails","JobTitle","h2","EmployerName","h3","JobDescription","p","JobDetailTitle","span","JobDetail","Button","button","ApplicantJobDetails","state","id","job","setJob","navigate","loading","setLoading","showDialog","setShowDialog","resumes","setResumes","selectedResumeId","setSelectedResumeId","then","res","data","catch","error","console","log","handleApply","resumeId","jobId","success","message","handleOpenDialog","handleCloseDialog","handleSelectResume","children","src","employer","employerImage","alt","title","organizationName","description","workType","skills","qualification","alreadyApplied","onClick","show","onClose","onSelectResume"],"sources":["/Users/ayush/Desktop/security cw 2/React/app_final/src/pages/applicant/job_detail/ApplicantJobDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport styled from 'styled-components';\nimport { applyToJobApi, getAllResumesApi, getJobDetailsByIdApi } from '../../../apis/Api';\nimport ApplicantNavbar from '../../../components/ApplicantNavbar';\nimport Loader from '../../../components/Loader';\nimport ResumeSelectionDialog from '../../../components/ResumeSelectionDialog';\n\nconst PageContainer = styled.div`\n  padding: 20px;\n  background-color: white;\n  min-height: calc(100vh - 60px);  // Assuming the navbar is 60px high\n`;\n\nconst JobContainer = styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  background: #f0f2f5;\n  border-radius: 8px;\n  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n`;\n\nconst JobHeader = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst EmployerImage = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n`;\n\nconst JobDetails = styled.div`\n  margin-left: 20px;\n`;\n\nconst JobTitle = styled.h2`\n  font-size: 24px;\n  color: #65A168;  // Green color for the job title\n  margin: 0;\n`;\n\nconst EmployerName = styled.h3`\n  font-size: 20px;\n  color: #333;\n  margin: 0;\n`;\n\nconst JobDescription = styled.p`\n  font-size: 16px;\n  color: #666;\n  margin-top: 20px;\n`;\n\nconst JobDetailTitle = styled.span`\n  font-weight: bold;\n`;\n\nconst JobDetail = styled.p`\n  font-size: 16px;\n  color: #333;\n  margin-top: 10px;\n`;\n\nconst Button = styled.button`\n  background-color: #2d69b3;\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 40px;  // Rounded corners\n  cursor: pointer;\n  font-size: 16px;\n  margin-top: 20px;\n`;\n\nconst ApplicantJobDetails = () => {\n  const { state } = useLocation();\n  const { id } = useParams();\n  const [job, setJob] = useState(null);\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [showDialog, setShowDialog] = useState(false);\n  const [resumes, setResumes] = useState([]);\n  const [selectedResumeId, setSelectedResumeId] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n    getJobDetailsByIdApi(id).then((res) => {\n      setJob(res.data.job);\n      setLoading(false);\n    }).catch((error) => {\n      console.log(error);\n      setLoading(false);\n    });\n  }, [id]);\n\n  useEffect(() => {\n    // Fetch the user's resumes\n    getAllResumesApi(1, 10).then((res) => {\n      setResumes(res.data.resumes);\n    }).catch((error) => {\n      console.log(error);\n    });\n  }, []);\n\n  const handleApply = (resumeId) => {\n    applyToJobApi({ jobId: id, resumeId }).then((res) => {\n      if (res.data.success) {\n        toast.success('Application submitted successfully');\n        navigate('/applicant/dashboard'); // Redirect to dashboard or any other page\n      } else {\n        toast.error(res.data.message);\n      }\n    }).catch((error) => {\n      toast.error('Error submitting application');\n      console.log(error);\n    });\n  };\n\n  const handleOpenDialog = () => {\n    setShowDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setShowDialog(false);\n  };\n\n  const handleSelectResume = (resumeId) => {\n    setSelectedResumeId(resumeId);\n    handleApply(resumeId);\n    handleCloseDialog();\n  };\n\n  return (\n    <>\n      <ApplicantNavbar />\n      <PageContainer>\n        {loading ? <Loader /> : (\n          <JobContainer>\n            <JobHeader>\n              <EmployerImage src={`http://localhost:5500/employerImage/${job.employer.employerImage}`} alt=\"Employer\" />\n              <JobDetails>\n                <JobTitle>{job.title}</JobTitle>\n                <EmployerName>{job.employer.organizationName}</EmployerName>\n              </JobDetails>\n            </JobHeader>\n            <JobDescription>{job.description}</JobDescription>\n            <JobDetail><JobDetailTitle>Work Type:</JobDetailTitle> {job.workType}</JobDetail>\n            <JobDetail><JobDetailTitle>Skills:</JobDetailTitle> {job.skills}</JobDetail>\n            <JobDetail><JobDetailTitle>Qualification:</JobDetailTitle> {job.qualification}</JobDetail>\n            {!state?.alreadyApplied && (\n              <Button onClick={handleOpenDialog}>Apply Now</Button>\n            )}\n          </JobContainer>\n        )}\n        <ResumeSelectionDialog show={showDialog} resumes={resumes} onClose={handleCloseDialog} onSelectResume={handleSelectResume} />\n      </PageContainer>\n    </>\n  );\n}\n\nexport default ApplicantJobDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}