{"ast":null,"code":"import * as r from \"restructure\";\nimport DACMarker from \"./markers/dac.js\";\nimport DefineHuffmanTableMarker from \"./markers/dht.js\";\nimport DQTMarker from \"./markers/dqt.js\";\nimport DRIMarker from \"./markers/dri.js\";\nimport EndOfImageMarker from \"./markers/eoi.js\";\nimport EXIFMarker from \"./markers/exif.js\";\nimport JFIFMarker from \"./markers/jfif.js\";\nimport SOSMarker from \"./markers/sos.js\";\nimport StartOfFrameMarker from \"./markers/sof.js\";\nimport StartOfImageMarker from \"./markers/soi.js\";\nconst UnkownMarker = {\n  length: r.uint16be,\n  buf: new r.Buffer(parent => parent.length - 2)\n};\nconst unknownMarkers = Array(63).fill(0).reduce((acc, v, i) => ({\n  ...acc,\n  [i + 0xffc0]: UnkownMarker\n}), {});\nconst Marker = new r.VersionedStruct(r.uint16be, {\n  ...unknownMarkers,\n  0xffc0: StartOfFrameMarker,\n  0xffc1: StartOfFrameMarker,\n  0xffc2: StartOfFrameMarker,\n  0xffc3: StartOfFrameMarker,\n  0xffc4: DefineHuffmanTableMarker,\n  0xffc5: StartOfFrameMarker,\n  0xffc6: StartOfFrameMarker,\n  0xffc7: StartOfFrameMarker,\n  0xffc9: StartOfFrameMarker,\n  0xffca: StartOfFrameMarker,\n  0xffcb: StartOfFrameMarker,\n  0xffcc: DACMarker,\n  0xffcd: StartOfFrameMarker,\n  0xffce: StartOfFrameMarker,\n  0xffcf: StartOfFrameMarker,\n  0xffd8: StartOfImageMarker,\n  0xffd9: EndOfImageMarker,\n  0xffda: SOSMarker,\n  0xffdb: DQTMarker,\n  0xffdd: DRIMarker,\n  0xffe0: JFIFMarker,\n  0xffe1: EXIFMarker\n});\nconst JPEG = new r.Array(Marker);\nconst decode = buffer => {\n  const markers = JPEG.fromBuffer(buffer);\n  return markers.map(_ref => {\n    let {\n      version,\n      ...rest\n    } = _ref;\n    return {\n      type: version,\n      ...rest\n    };\n  });\n};\nexport default {\n  decode\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}