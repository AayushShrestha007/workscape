{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import styled from'styled-components';import{getApplicantsForJobApi,updateApplicationStatusApi}from'../../../apis/Api';import EmployerNavbar from'../../../components/EmployerNavbar';import Loader from'../../../components/Loader';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PageContainer=styled.div`\n  padding: 20px;\n  padding-top: 30px;\n  background-color: white;\n  min-height: calc(100vh - 60px);  // Assuming the navbar is 60px high\n`;const ApplicantsContainer=styled.div`\n  max-width: 1600px;\n  margin: 0 auto;\n  padding: 20px;\n  padding-top: 5px;\n  background: white;\n  border-radius: 8px;\n`;const ApplicantCard=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 20px;\n  border-bottom: 1px solid #ccc;\n  &:last-child {\n    border-bottom: none;\n  }\n  border-radius: 8px;\n`;const ApplicantHeader=styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n`;const ApplicantImage=styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n`;const ApplicantDetailsContainer=styled.div`\n  margin-left: 20px;\n`;const ApplicantName=styled.h2`\n  font-size: 20px;\n  color: #65A168;  // Green color for the applicant name\n  margin: 0;\n`;const ApplicantEmail=styled.p`\n  font-size: 16px;\n  color: #666;\n  margin: 5px 0;\n`;const ButtonContainer=styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 10px;\n`;const Button=styled.button`\n  background-color: #3d96fd;\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 40px;  // Rounded corners\n  cursor: pointer;\n  font-size: 16px;\n  align-self: flex-start;\n`;const ShortListButton=styled(Button)`\n  background-color: #2d69b3;  // Green color for the short list button\n`;const Title=styled.h1`\n  font-size: 32px;\n  color: #333;\n  text-align: left;\n  margin-bottom: 26px;\n  margin-left: 34px;\n`;const JobApplicants=()=>{const{jobId}=useParams();const[applicants,setApplicants]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{setLoading(true);getApplicantsForJobApi(jobId).then(res=>{console.log('API response:',res.data);setApplicants(res.data.applicants);setLoading(false);}).catch(error=>{console.log('Error fetching applicants:',error);setLoading(false);});},[jobId]);const handleShortList=async applicationId=>{console.log('Shortlisting application ID:',applicationId);try{await updateApplicationStatusApi({applicationId,status:'shortlisted'});toast.success('Applicant Shortlisted');// Fetch applicants again to update the list\nconst res=await getApplicantsForJobApi(jobId);console.log('Updated applicants list:',res.data.applicants);setApplicants(res.data.applicants);}catch(error){console.error('Error updating status:',error);}};const findApplication=(applicant,jobId)=>{if(!applicant||!applicant.applications){console.log('Applicant or applications not defined:',applicant);return null;}const application=applicant.applications.find(app=>app.job.toString()===jobId);if(!application){console.log('Application not found for applicant:',applicant.name);return null;}console.log('Found application for applicant:',applicant.name,'Application:',application);return application;};const getResumeUrl=(applicant,resumeId)=>{const resume=applicant.resumes.find(resume=>resume._id.toString()===resumeId.toString());return resume?resume.fileUrl:null;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EmployerNavbar,{}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(PageContainer,{children:[/*#__PURE__*/_jsx(Title,{children:\"Applicants\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(ApplicantsContainer,{children:applicants.map(applicant=>/*#__PURE__*/_jsxs(ApplicantCard,{children:[/*#__PURE__*/_jsxs(ApplicantHeader,{children:[/*#__PURE__*/_jsx(ApplicantImage,{src:`http://localhost:5500/userImage/${applicant.userImage}`,alt:\"Applicant\"}),/*#__PURE__*/_jsxs(ApplicantDetailsContainer,{children:[/*#__PURE__*/_jsx(ApplicantName,{children:applicant.name}),/*#__PURE__*/_jsx(ApplicantEmail,{children:applicant.email})]})]}),/*#__PURE__*/_jsxs(ButtonContainer,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>{const applicationId=findApplication(applicant,jobId);const resumeUrl=getResumeUrl(applicant,applicationId.resume);window.open(`http://localhost:5500${resumeUrl}`,'_blank');},children:\"Review Resume\"}),/*#__PURE__*/_jsx(ShortListButton,{onClick:()=>{const applicationId=findApplication(applicant,jobId)._id;if(applicationId){handleShortList(applicationId);}else{console.log('Application ID not found for applicant:',applicant.name);}},children:\"Short List\"})]})]},applicant._id))})]})]});};export default JobApplicants;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}